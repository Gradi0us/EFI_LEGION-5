# macOS on Lenovo Legion 5-15ACH6A - Ryzen 5600H & Radeon RX 6600m

Lenovo Legion 5-15ACH6A Type 82NW Opencore EFI and some info for running macOS Ventura .  // Đây là một vài thông tin về EFI/opencore

![]([https://user-images.githubusercontent.com/8891448/227005084-5df1b9a2-9782-447f-9e09-1beb4176f1f5.gif](https://photos.google.com/u/2/photo/AF1QipMrwszJG6UznrYWP31O12-MkzDWhdhOxBBkxMtD))

## Considerations

_Information available only for possible references. I do not recommend following all the information presented here. My experience with hackintosh on AMD is only 3 weeks._

_ Tất cả thông tin tại đây chỉ có thể để tham khảo, không nên làm theo toàn bộ vì tôi có rất ít kinh nghiệm 

## Table of Contents // Bảng các chức năng

*   [Specifications](#specifications). // Thông tin chi tiết phần cứng
*   [What's Working](#whats-working).   // Các chức năng hoạt động
*   [What's not Working](#whats-not-working). // Hạn chế
*   [Bios Options](#bios-options).  //Setting Bios (Chỉ để tham khảo mỗi thiết bị khác nhau)
*   [UMAF Tool - Disable XHC1](#umaf-tool---disable-xhc1) // Tắt controller XHC1
*   [NOTICE for laptop installer](#NOTICE) // thông báo
*   [Kexts Used](#kexts-used)  // Các kext sử dụn
*   [SSDTs Used](#ssdts-used). // Các SSDTs đã sử dụng
*   [Credits](#credits).   // Nguồn & Cảm ơn
*   [Device Support](#MuxSwitch_SP) // thiết bị hỗ trợ mux switch

## Specifications // Cấu hình

<table><tbody><tr><td>Model</td><td>Legion 5-15ACH6A Type 82NW</td></tr><tr><td>CPU</td><td>AMD Ryzen™ 5 5600H Processor</td></tr><tr><td>DGPU</td><td>AMD Radeon RX 6600M 8GB</td></tr><tr><td>RAM</td><td>1x8G Lexar DDR4 3200Mhz \n 1x8G SKhynix DDR4 3200Mhz</td></tr><tr><td>NVMe</td><td>1x SKhynix (err for BOOT unplug) \n 1x 512G Western Digital SN750</td></tr><tr><td>WIFI</td><td>Intel® Wi-Fi 6E AX210</td></tr><tr><td>Bluetooth</td><td>Orico USB Dongle (chip CSR8510)</td></tr><tr><td>Ethernet</td><td>Realtek RTL8111</td></tr><tr><td>Audio</td><td>Realtek ALC287</td></tr><tr><td>LCD Panel</td><td>15.6 FHD IPS 120Hz</td></tr><tr><td>Bios Version</td><td>G9CN30WW</td></tr><tr><td>Opencore Version</td><td>0.9.0</td></tr><tr><td>SMBIOS used</td><td>MacPro7,1 (Need to enter your information generated by <a href="You need to enter your information generated by the">GenSMBIOS</a>)</td></tr><tr><td>Target MacOS Version</td><td>MacOS Ventura 13.2.1 </td></tr></tbody></table>

## What's Working // Chức năng hoạt động

| Item | Status | Notes |
| --- | --- | --- |
| CPU | ✅ | AMD Vanilla Kernel Patches ([Modify according to yours Core Count](https://github.com/AMD-OSX/AMD_Vanilla)) |
| DGPU | ✅ | with **agdpmod=pikera** boot arg and **\-v** boot arg _**removed in my**_ final version to prevent black screen on login |
| HDMI A/V out | ✅ |   |
| USB | ✅ | Only rear ports - [XHC1 controller disabled](#umaf-tool---disable-xhc1) | 
| Keyboard | ✅ | Voodoops2controller Kext |
| Audio | ✅ | AppleALC kext working with layout-id 21 |
| Ethernet | ✅ | RealtekRTL8111 Kext |
| Intel WIFI | ✅ | Itlwm Kext and HeliPort app |
| Battery | ✅ | VoodooBatteryStatus Kext |
| Shutdown/Reboot | ✅ |   |


 ## NOTICE VIETNAMESE ONLY
 
| item | Des | Note |
| --- | --- | --- |
| CPU | Kernel Panic | Các cpu AMD sẽ dễ gặp lỗi này 15h 16h 17h 19h https://github.com/AMD-OSX/AMD_Vanilla thêm vào config.plist hãy nhớ chỉnh lại số theo như hướng dẫn ở bên dưới ( mới nhất cho bản 13.3 beta )|
|Laptop Model | iGPU & dGPU | hấu hết các laptop AMD đèu có card onBoard việc cài đặt sẽ trở nên bất khả thi nếu như thiết bị của bạn không hỗ trợ Mux_Switch |
| USB bluetooth | Do tắt XHC 1 kéo theo mất bluetooth | Bạn có thể mua usb sử dụng chipset CSR8510 (mua của orico khá rẻ ) Thanks Kalkman for this Information |
| USB SOUND | Không ai dùng laptop không cần mic | Lỗi chung của các thiết bị AMD các bạn có thể ra quán máy tính đâu đó hoặc shoppe để sử dụng 20 nghìn |
| XHC1 | Controller | vấn đề này hiện tại mới ghi nhận ở các thiết bị laptop lenovo legion 5 |




## What's not Working

| Item | Status | Notes |
| --- | --- | --- |
| [XHC1 USB Controller](#umaf-tool---disable-xhc1) | ❓ | For some reason, with both controllers activated, random freezes occurs. Only XHC0 enabled (rear ports): 3 3.2 USB-A + 1 3.2 USB-C |
| Trackpad | ⛔️ | No Kext compatible with AMD found |
| Brightness Control | ⛔️ | No Kext/SSDT compatible found |
| Sleep | ❓ | At first, some problem with the DGPU's powerplay (I don't have the necessary knowledge to go deeper) |
| iServices | ❓ | Nothing tested yet |
| Bluetooth | ⛔️ | Disable XHC1 (same with side usb)- can replace with usb bluetooth  |
| Microphone | ⛔️ | Is not working on every AMD Devices - can replace with usb SOUND |


## Bios Options. //Thiết lập bios

*   **Only Discrete** GPU
*   Device Guard **Disabled**
*   Secure Boot **Disabled**

## UMAF Tool - Disable XHC1 //tắt XHC1

Read [Disclaimer](https://github.com/DavidS95/Smokeless_UMAF) and download [UniversalAMDFormBrowser](https://github.com/DavidS95/Smokeless_UMAF/blob/main/UniversalAMDFormBrowser.zip)
  //Thanks Kalkman for GIF
1.  Format a pendrive in **FAT32** and copy content to root
2.  **Boot** from **pendrive** 
3.  Navigate to **Device Properties** > **AMD CBS** > **FCH Common Options** > **USB Configuration Options** > **XHCI1 Controller Enable**: Change to **Disabled**
4.  **Esc** to back and press **Y** when prompted to save, Esc to back, then **Reset** on first menu (not continue)

![](https://user-images.githubusercontent.com/8891448/226887440-8712f449-cc25-43e4-9fb4-1afac1c74b54.gif)

## Kexts Used // kext sử dụng

| Kext | Description |
| --- | --- |
| [AMDRyzenCPUPowerManagement.kext](https://github.com/trulyspinach/SMCAMDProcessor) | Power management and monitoring of AMD processors |
| [AppleALC.kext](https://github.com/acidanthera/AppleALC) | Native macOS HD audio for not officially supported codecs |
| [AppleMCEReporterDisabler.kext](https://files.amd-osx.com/AppleMCEReporterDisabler.kext.zip) | Disables AppleIntelMCEReporter which causes panics on AMD CPUs |
| [BlueToolFixup.kext](https://github.com/acidanthera/BrcmPatchRAM) | Patches Bluetooth stack to allow non-Apple Bluetooth |
| [Lilu.kext](https://github.com/acidanthera/Lilu) | Platform for arbitrary kext, library, and program patching throughout the system |
| [NVMeFix.kext](https://github.com/acidanthera/NVMeFix) | Improve compatibility with non-Apple SSDs |
| [RadeonSensor.kext](https://github.com/aluveitie/RadeonSensor) | GPU temperature |
| [RealtekRTL8111.kext](https://github.com/Mieze/RTL8111_driver_for_OS_X) | Open source driver for the Realtek RTL8111/8168 family |
| [RestrictEvents.kext](https://github.com/acidanthera/RestrictEvents) | Blocking unwanted processes causing compatibility issues on different hardware and unlocking the support for certain features restricted to other hardware |
| [SMCAMDProcessor.kext](https://github.com/trulyspinach/SMCAMDProcessor) | Power management and monitoring of AMD processors |
| [SMCBatteryManager.kext](https://github.com/acidanthera/VirtualSMC) | Enables battery readings |
| [SMCRadeonGPU.kext](https://github.com/aluveitie/RadeonSensor) | Provide GPU temperature to a dedicated gadget |
| [USBToolBox.kext](https://github.com/USBToolBox/kext) | Common actions for USB mapping easier |
| [UTBMap.kext](https://github.com/USBToolBox/tool) | USB Map performed with the USBToolbox tool on Windows 11 |
| [VirtualSMC.kext](https://github.com/acidanthera/VirtualSMC) | Advanced Apple SMC emulator in the kernel |
| [VoodooPS2Controller.kext](https://github.com/acidanthera/VoodooPS2) | Fixes keyboard |
| [WhateverGreen.kext](https://github.com/acidanthera/WhateverGreen) | Fixes AMD GPU |
| [itlwm.kext](https://github.com/OpenIntelWireless/itlwm) | Adds Intel WIFI support |

## SSDTs Used. // SSDTs Sử dụng

Almost done with [SSDTTime](https://github.com/corpnewt/SSDTTime) in Windows 11

| Table | Description |
| --- | --- |
| [SSDT-EC](https://github.com/corpnewt/SSDTTime) | Adds a fake Embedded Controller device |
| [SSDT-HPET](https://github.com/corpnewt/SSDTTime) | Fixes IRQ conflicts |
| [SSDT-PLUG-ALT](https://github.com/corpnewt/SSDTTime) | Fixes CPU definitions |
| [SSDT-SBUS-MCHC](https://dortania.github.io/Getting-Started-With-ACPI/Universal/smbus-methods/manual.html#finding-the-acpi-path) | Fixes AppleSMBus |
| [SSDT-USBX](https://github.com/corpnewt/SSDTTime) | Enables USB Power Management |
| [SSDT-XOSI](https://github.com/corpnewt/SSDTTime) | Spoof macOS to Windows for some ACPI features |

## Credits

*   [AMD-OSX](https://forum.amd-osx.com/) Forum and the [dedicated Thread](https://forum.amd-osx.com/threads/amd-rayon-r7-5800h-install-monterey-kernel-panic.2725) users.
*   ExtremeXT,Kalkman, for help, corrections, my [first EFI](https://github.com/ExtremeXT/Lenovo_Legion_5_Hackintosh) reference, the original concept of disable one USB Controller AND README informations.
*   Telegram Noot group members for mention UMAF tool.
*   zxc2689963 for one EFI reference.
*   [Dortania](https://dortania.github.io/OpenCore-Install-Guide/) for the guides.
*   [DavidS95](https://github.com/DavidS95) for [UMAF](https://github.com/DavidS95/Smokeless_UMAF).
*   [Apple](https://www.apple.com/) for macOS.
*   [Acidanthera](https://github.com/acidanthera) for OpenCore and most Kexts.
*   Anyone else that helped to develop and improve hackintoshing.

## MuxSwitch_SP

| Laptop brand | Description |
| --- | --- |
| LENOVO | Legion5/7/7 slim is supported,All of Ideapad is not supported // VNI: Các thiết bị legion5/5pro/7/7slim đều hỗ trợ, các thiết bị ideapad đều không hỗ trơ |
| DELL | No information // VNI: không có thông tin Dell alienware có vẻ cũng không hỗ trợ |
| ASUS |(ROG/TUF) Almost version 2022 or newer is supported check your laptop u wanna buy // VNI: Hầu hết đều hỗ trợ nhưng cần kiễm tra kĩ trước khi ra quyết định |
| MSI | no Information (almost not supported but some High-end device is supported) // VNI: Không có thông tin chi tiết nhưng hầu hết không hỗ trợ 1 vài thiết bị cao cấp có hỗ trợ |
| ACER | Acer Nitro 2022 almost not supported Predator is almost support // NVI: ACER NITRO hầu hết không hỗ trợ , predator có hỗ trọ ở hầu hết các máy |
| HP | No information ( Victus & OMEN  ) // VNI: không có thông tin
| LAPTOP | LAPTOP |
                                                              ______
